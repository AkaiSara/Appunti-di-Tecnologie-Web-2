
È\chapter{La visibilità}

	Altra caratteristica essenziale per l'informazione all'interno di un sito è l'essere trovata. Per far ciò conta la \textbf{visibilità esterna} e questa è determinata dal posizionamento del sito sui motori di ricerca. 
	Vedremo che è essenziale posizionarsi nella top 10 per le \emph{keyword} che ci riguardano e capiremo come promuovere un sito analizzando il funzionamento dei \emph{search engine} (SE) e l'uso che gli utenti ne fanno.

	\section{Posizionamento SERP}	
		La top 10 risultati assorbe il 95\% dei click dell'utenza dopo una ricerca.
		\begin{enumerate}
			\item 51\% click (il primo risultato prende più di tutte le altre!),
			\item 16\% click;
			\item 6\% click;
			\item 6\% click;
			\item 5\% click;
			\item 4\% click;
			\item 2\% click;
			\item 1\% click;
			\item 1\% click;
			\item 2\% click (effetto \emph{black jersay} o \emph{Malabrocca}).		
		\end{enumerate}
		
		Nota: le strategie che verranno illustrate in seguito non funzionano sempre, basta infatti un minimo cambiamento per cambiare il comportamento degli utenti sui risultati. Infatti le recenti introduzioni di Google sono state analizzate molto, prima di farle diventare effettive. La striscia di immagini per esempio svolgono un effetto sospensivo per trattenere l'utente e non hanno impatto sulla percezione del testo.
	
	\section{SMAPDEX (SEO)}
		È l'insieme di attività svolte con lo scopo di far sì che un sito sia indicizzato da Google e occupi le posizioni più alte della SERP. Nelle seguenti sezioni prima spiegheremo il funzionamento dei motori di ricerca e poi illustreremo le tecniche per migliorare il posizionamento o addirittura ingannare il SE.
		Il \textbf{punteggio di una pagina} è calcolato sul riferimento a due componenti delle pagine:
		\begin{itemize}
			\item componente \textbf{testuale};
			\item componente \textbf{ipertestuale}.
		\end{itemize}
		
		\subsection{Parte testuale}
			Per la parte testuale si misura la qualità in base a quanto una parola è importante per una pagina. Per misurare l'importanza di una parola si utilizzano due tecniche:
			
			\subsubsection{Term frequency (TF)}
				Misurare la frequenza di una parola. Ad esempio su 100 parole in una pagina 5 sono di nostro interesse per cui il TF è uguale al 5\%.
				È ovvio che solo questa tecnica non basta per avere risultati soddisfacenti. Parole molto frequenti come articoli, congiunzioni, eccetera avrebbero un'importanza troppo alta anche se prive di significato.
				
			\subsubsection{Inverse document frequency}
				È la misura dell'inverso della frequenza della parola nell'insieme dei documenti (il sito web) scalata logaritmicamente. 
				
				Esempio: su 1000 pagine "il" appare in 980 pagine, ha TF=98\% mentre:
				\[
					IDF=\log(\frac{1}{0,98})=0,008;
				\]
				
				Altro esempio: su 1000 pagine la parola "pippo" ha il 10\% di frequenza, allora:
				\[
				IDF=\log(\frac{1}{0,1})=1;
				\]
				
				Ora più rara è la parola più è alto il bonus.
				
			\subsubsection{Query SE}
				Ogni \emph{query} sarà composta dalle parole con cui il SE andrà a calcolare TF e IDF nei siti web. Quelli con il valore più alto si posizioneranno più in alto.
				Se sottoponiamo una \emph{query} con una parola $p$  il SE prende le pagine dove appare $p$ e ne calcola il TF e l'IDF. Per più parole in una \emph{query} si usa la somma del TF e IDF.
				In questo modo alzare il punteggio di una parola può rischiare di diluire il valore e viceversa. È importante quindi selezionare un gruppo di parole e alzare il loro TFIDF a scapito di altre, queste \emph{keyword} saranno le parole che competeranno nella SERP.
			
		\subsection{Term spam}
			Vediamo quindi alcune tecniche per aumentare il punteggio per le \emph{keyword} definite.
			\begin{description}
				\item[Body spam:] inserire le \emph{keyword} semplicemente nel body html.
				\item[Title spam:] inserire le \emph{keyword} sul titolo delle pagine web, è una parte che l'utenza media non vedrà mai.
				\item[Meta tag spam:] inserire le \emph{keyword} in appositi tag html (i \emph{meta}) che descrivono a \emph{keyword} la pagina. Per l'inteso sfruttamento i SE oramai ignorano questo genere di spam.
				\item[Anchor text spam:] inserire le \emph{keyword} nel testo di un link tra i tag \emph{<a>\dots </a>}. Questo oltre al punteggio della pagina aumenta il punteggio alla pagina destinazione e il bonus viene dato con meno limiti per il TFIDF.
				\item[URL spam:] inserire le \emph{keyword} nell'URL dell'indirizzo della pagina. Otteniamo bonus simili a quelli dell'\emph{anchor text spam}.
			\end{description}
			
		
			\subsubsection{Starter kit}
				Abbiamo visto dove inserire le \emph{keyword}. Ora vediamo le tecniche utilizzate di come inserirle:
				\begin{description}
					\item[Repetition:] ripetere la \emph{keyword} stando attenti al suo TFIDF. Tecnica facile da trovare dal SE che può pure penalizzare.
					\item[Dumping:] inserire termini rari nel testo anche se non c'entrano nulla. Otteremo un punteggio alto sul sito anche se questo non è pertinente.
					\item[Wearing:] utilizzare pezzi di altre pagine web in cui sono inserite le nostre \emph{keyword} in modo random.
					\item[Stitching:] \emph{past \& copy} da siti differrenti e si assembla il tutto ottenendo un contenuto rilevante. Per esempio da una risposta di un utente su un forum sviluppiamo un articolo nuovo. Più argomenti diversi danno inoltre un bonus globale e i SE fanno fatica a capire se è contenuto copiato.
					\item[Broeding:] oltre alle \emph{keyword} fare uso di sinonimi e frasi correlate. Questo coprirà più le \emph{query} degli utenti.
				\end{description}		
		
			\subsubsection{Quali keyword?}
				Una domanda a cui la risposta probabilmente decreterà il successo di un sito. Le \emph{keyword} devono essere pensate in base a quello che cerca l'utente. Occorre un'attenta analisi prima di lanciarsi nel mondo SEO. Di seguito alcuni strumenti utili a tale scopo:
				\begin{itemize}
					\item \href{https://adwords.google.com/KeywordPlanner}{Google keyword tool} (a pagamento);
					\item \href{http://keywordtool.io/}{keywordtool.io} (alternativa gratis);
					\item \href{https://www.google.it/trends/}{Google Trends} (ottimo per capire la tendenza nel tempo);
				\end{itemize}
			
		\subsection{Problema e soluzioni del term spamming}
			Non basta potenziare la pagina se infatti questa non è utile e soffre di problemi di usabilità l'utente semplicemente abbandonerà. Se vogliamo potenziare una pagina con le tecniche di \emph{term spamming} dobbiamo nascondere in qualche modo all'utente ciò che serve ai SE.
		
			\subsubsection{Content hiding}
				Il contenuto potenziante è nascosto all'utente e solo i motori di ricerca lo vedono.
			
			\subsubsection{Redirection}
				Anche detta tecnica 302, consiste nel potenziare una pagina che sarà costruita con soli fini di posizionamento che indirizza alla vera pagina. In questo modo gli utenti vedranno la pagina studiata per loro mentre i SE si fermeranno a leggere la prima. Questa tecnica funziona solo con trucchetti che richiedono javascript, il \emph{meta} che reindirizza infatti è riconosciuto dai SE. Con l'uso di javascript il \emph{meta} verrà aggiunto dinamicamente mentre i SE, per costi di risorse, non eseguono il codice. Tuttavia ad oggi i SE leggono il codice javascript e cercano se esiste questa tecnica, per ingannarli è sufficiente offuscare un po' il codice.
			
			\subsubsection{Cloaking}
				Controlla l'accesso alla pagina per capire se chi visita è un bot o un umano. Se questo è un bot li presento una pagina apposita diversa da quella mostrata all'utente. È una tecnica difficile da scoprire tanto che Google la penalizza moltissimo se segnalata ma questo avviene solo tramite intervento umano.
			
	
		\subsection{Parte ipertestuale: pagerank}
			Il punteggio delle pagine web è affidato anche ai link di ipertesto: il \emph{pagerank}. Ad ogni pagina $\pi_v$ era affidato un punteggio pari a:
				\[
					\pi_v=\sum_{(\omega, v) \in E}\frac{\pi_{\omega}}{d_w}
				\]
			Dove:
			\begin{itemize}
				\item $\omega$, $v$ è un link da $\omega$ a $v$;
				\item $d_\omega$ è il numero di link uscenti.
			\end{itemize}
			Ossia, se una pagina $\omega$ ha un link verso un'altra pagina un certo punteggio viene dato quest'ultima.
			Come vincolo abbiamo:
			\[
				\sum\pi_v=1
			\]
			
			Questo calcolo di \emph{pagerank} molto naive era molto facile da manipolare con gli stratagemmi visti in precedenza, si è deciso quindi di farne una riformulazione.
		
			\subsubsection{Le catene di Markov e il random walk}
				La riformulazione avviene sfruttando l'algebra lineare e speciali matrici dette catene di Markov che godono di alcune proprietà unite alla teoria della probabilità. Il \emph{pagerank} di una pagina web diventa quindi la probabilità di entrare in quella pagina da altre pagine.
				Per rendere più chiaro il concetto si può pensare ad una scimmia  (un \emph{rando surfer}) che naviga il web in modo del tutto casuale, la probabilità che la scimmia entri in una pagina ne determina il suo punteggio.
				
				Esempio:
					dato il seguente grafo i nodi che rappresentano pagine e gli archi i link:
					$A \longleftrightarrow B \longleftrightarrow C$,
					
					B ottiene il 50\% del flusso mentre A e C il 25\%.
					
				Il \emph{random surfer} è un altro fattore su cui tener conto ma attenzione esso non rispecchia esattamente gli intenti degli utenti che non navigano totalmente a caso.
			
			\subsubsection{Problemi: spider traps e island}
				Per attuare il sistema spiegato in precedenza c'è la necessità di far girovagare questi \emph{random surfer} (i famosi \emph{spider}) che raccolgono dati da cui calcolare il \emph{pagerank}. La navigazione casuale da pagina a pagina può rivelarsi fatale in alcuni casi.
				\begin{description}
					\item[Spider traps:] nel caso in cui uno spider rimanga intrappolato all'interno di un sito in cui pagine continuano a indirizzare ad altre pagine in un ciclo infinito (si pensi ad un calendario online).
					\item[Island:] esistono poi casi in cui alcuni pezzi di rete sono isolati dagli altri, dei veri e propri micro-web indipendenti in cui per gli \emph{spider} non c'è alcun modo di passare. 
				\end{description}
				
		\subsection{Pagerank 2.0}
			A seguito dei problemi prima elencati si è cercato un'altra soluzione: il teletrasporto. La formula quindi cambia in:
			\[
				\pi_v=(1-\epsilon)\cdot(\sum_{(\omega, v) \in E}\frac{\pi_{\omega}}{d_w})+\frac{\epsilon}{N}
			\]
			Nella pratica si è aumentata la casualità. Ora la scimmia ha anche un dado, con una certa probabilità da come spiegato in precedenza con un'altra probabilità effettua il teletrasporto in un'altra pagina casuale (da notare un comportamento ancora più incoerente con quello fatto dagli utenti).
			
			In questo modo grazie al \textbf{fattore di teleporting} $\epsilon$ risolviamo \emph{spider traps} e \emph{island}; più questo fattore è verso il 100\% e più il punteggio in probabilità alle pagine diventa uguale per tutte, viceversa più è verso lo 0 e più il \emph{pagerank} si avvicina a quello calcolato in precedenza.
			
			Un altro modo per il calcolo del \emph{pagerank} è il \emph{total rank}:
			\[
				T=\int_0^1r(\alpha) d\alpha
			\]
			
		
			\subsubsection{Problema: dead ends}
				Nonostante l'introduzione del teletrasporto rimane il problema (prima non illustrato) delle \emph{dead ends}. Con questa formula l'egoismo paga, un sito è meglio che mantenga i link al suo interno.
				
				La soluzione a cui sono arrivati i moderni motori di ricerca è calcolare l'importanza su altro per ogni sito e pagina web e non sul vero web. (vedere sezione Web semantico)
		
		\subsection{Migliorare il pagerank}
			Esistono due fattori fondamentali che influenzano il \emph{pagerank} con l'uso del teletrasporto:
			\begin{itemize}
				\item Inlink;
				\item Outlink.
			\end{itemize}
		
			\subsubsection{Inlink}
				Link entranti alla pagina. Per incrementare il \emph{pagerank} di una pagina dobbiamo fare in modo che questa sia puntata dal maggior numero di pagine esterne. Alcune tecniche per fare ciò sono:
				\begin{description}
					\item[Infiltration:] infiltrarsi in altri siti e mettere link alla pagina da potenziare (commenti spam etc.).
					\item[Honey pot:] creare contenuto appetibile e utile che riceve link (è il modo giusto di aumentare il \emph{pagerank}). Molto spesso questo contenuto è vittima del \emph{copy \& past}.
					\item[Link exchange:] allearsi con altri per scambiarsi link.
					\item[Resurrection:] acquistare domini defunti con \emph{pagerank} abbastanza alto. Il \emph{pagerank} infatti non decade mai e resta legato al dominio, inoltre l'età del dominio conta come bonus. Esistono interi business per la vendita di domini defunti ma appetibili per il proprio \emph{pagerank}.
				\end{description}
				
				\paragraph{Marketing 2.0}
					Un esempio nella storia del web di quanto siano importanti gli \emph{inlink} arriva dalla pagina \href{http://www.milliondollarhomepage.com/}{million dollar page}. Una schermata di pixel venduta a 1 dollaro l'uno, il punto forte per cui tutti si affrettarono di acquistare almeno 1 pixel fu la presenza di tutti i link che puntavano alla pagina resa famosa dall'originale idea dell'autore. La pagina diventò una vera e propria cascata di flusso per il \emph{pagerank} ed ogni link al suo interno ne acquistava un po' ad un prezzo ridicolo.
			
			\subsubsection{Outlink}
				Passiamo ora ai link uscenti. Posizionando un link esterno in una pagina un po' di flusso di \emph{pagerank} esce dalla pagina. In questo modo è garantita la \textbf{solidità}, l'aggiunta di \emph{outlink} non alza il punteggio e lo \emph{smapdex} non può essere locale.
				Questo controintuitivamente non risulta essere vero! Con la presenza di \emph{outlink} posso aumentare il \emph{pagerank} della mia pagina con dinamiche imprevedibili. Ciò deriva dalla presenza del \emph{fattore di teleporting}.
			
			\subsubsection{Spam farm}
				Esistono numerose tecniche per usare gli \emph{outlink} e gli \emph{inlink} per aumentare il \emph{pagerank}. Nascono le \emph{spam farm} strutture apposite studiate di link e pagine per l'incremento del punteggio nei vari SE. 
				Una \emph{spam farm} ottimale singola consiste in una pagina o più pagine, definite pagine \textbf{target}, puntate da link bidirezionali da altre pagine, definite pagine \textbf{potenzianti}. Un struttura ottimale inoltre presenta la proprietà di \emph{reachability}, ovvero se gli spider dei SE raggiungono la pagina \emph{target} attraverso una pagina \emph{potenziante} allora tutta la \emph{spam farm} diventa raggiungibile (vedere figura ~\ref{fig:LaVisibilita-SpamFarm1}).
				
				\begin{figure} [h]
					\centering
					\includegraphics[scale=0.9]{images/LaVisibilita-SpamFarm1}
					\caption{La visibilità - Esempi spam farm singole ottimali}
					\label{fig:LaVisibilita-SpamFarm1}
				\end{figure}
				
				\paragraph{Alleanze}
					Il modo migliore per sfruttare le \emph{spam farm} è sfruttare alleanze con altri siti internet. Le alleanze tra siti (due e più) possono essere di tipo:
					\subparagraph{Alleanza profonda}
						Le pagine target distribuiscono il flusso sulle pagine potenzianti dell'altro sito (figura ~\ref{fig:LaVisibilita-SpamFarm2}) creando una media dei \emph{pagerank} stabile.
						
					\begin{figure} [h]
						\centering
						\includegraphics[scale=1]{images/LaVisibilita-SpamFarm2}
						\caption{La visibilità - Spam farm alleanza profonda}
						\label{fig:LaVisibilita-SpamFarm2}
					\end{figure}
						
					\subparagraph{Alleanza superficiale}
						Le pagine target dei due siti sono connesse con link (figura ~\ref{fig:LaVisibilita-SpamFarm3}, il \emph{pagerank} ottenuto risulta essere più del massimo delle due pagine target prima della connessione.
					
				\begin{figure} [h]
					\centering
					\includegraphics[scale=1]{images/LaVisibilita-SpamFarm3}
					\caption{La visibilità - Spam farm alleanza superficiale}
					\label{fig:LaVisibilita-SpamFarm3}
				\end{figure}
				
					\subparagraph{Alleanze Ring}
						Alleanza che comprende più di due siti. Le pagine target indicizzano in un percorso circolare la pagina target successiva creando una sorta di anello (figura ~\ref{fig:LaVisibilita-SpamFarm4}).
						
				\begin{figure} [h]
					\centering
					\includegraphics[scale=1]{images/LaVisibilita-SpamFarm4}
					\caption{La visibilità - Spam farm alleanza ring}
					\label{fig:LaVisibilita-SpamFarm4}
				\end{figure}
				
					\subparagraph{Alleanza complete core}
						Potenziamento della \emph{spam farm} di tipo \emph{ring}, la struttura bidirezionale è più vantaggiosa. Ora ogni pagina target ha link entrante e uscenti verso le due pagine target più vicine (figura ~\ref{fig:LaVisibilita-SpamFarm5}). Per fare un core basta un grafo fortemente connesso.
				
				\begin{figure} [h]
					\centering
					\includegraphics[scale=0.6]{images/LaVisibilita-SpamFarm5}
					\caption{La visibilità - Spam farm alleanza complete core}
					\label{fig:LaVisibilita-SpamFarm5}
				\end{figure}
				
			\subsubsection{Contromisure SE}
				Ovviamente le \emph{spam farm} sono azioni penalizzate dai SE poiché ingannano la misura del \emph{pagerank}. I motori di ricerca controbattono quindi cercando di identificare queste unioni rivelando l'esistenza di grafi fortemente connessi. Questi grafi dipendono dal modo con cui l'alleanza si è creata e dal numero di partecipanti ad asse. Visto il numero enorme di combinazioni fu creata un'enciclopedia delle sequenze. Purtroppo in ogni sequenza il numero di collegamenti da controllare cresce enormemente in base al numero di partecipanti (N), per:
				\begin{itemize}
					\item N=3 $\rightarrow$ 18 collegamenti;
					\item N=4 $\rightarrow$ 1606 collegamenti;
					\item N=5 $\rightarrow$ 565080 collegamenti;
					\item \dots
				\end{itemize}
				Non esiste nessuna formula che calcoli il risultato di collegamenti dato un numero N di partecipanti. Inoltre il costo computazionale risulta dispendiosissimo. Si sono quindi cercate soluzioni "laterali" più sofisticate.
				
				Un modo consiste in calcolare il vecchio \emph{pagerank} e confrontarlo con quello nuovo. Se il rapporto tra le due misure risulta troppo alto significa che la pagina analizzata è potenziata. È stato stimato che il successo di questa tecnica si trova tra il 95\% e 100\%.				
				
				Un altro modo consiste nel basarsi sulla \textbf{forma del web}: la struttura di alto livello a papillon (figura ~\ref{fig:LaVisibilita-FormaWeb}). L'idea è di analizzare la forma di un sito web, se questa non rispecchia ed ha valori al di fuori della media nella norma globale dei siti web allora il sito è sospetto e avviene un controllo più approfondito.
				Nella figura ~\ref{fig:LaVisibilita-ContromisureSE1} vediamo la zona creata dai link entranti nei siti nel web globale che rappresenta la norma. I punti situati all'esterno (evidenziati dall'ellisse) sono siti di cui si sospetta il potenziamento. Nella figura ~\ref{fig:LaVisibilita-ContromisureSE2} invece vediamo i link uscenti. 
				
				\begin{figure}
					\centering
					\includegraphics[scale=0.6]{images/LaVisibilita-FormaWeb}
					\caption{La visibilità - Forma ad alto livello del web}
				\end{figure}								
				
				\begin{figure} [h]
					\subfloat[][\emph{Distribuzione link entranti}.]
						{\includegraphics[width=.48\textwidth]{images/LaVisibilita-ContromisureSE1}} \quad
					\subfloat[][\emph{Distribuzione link uscenti}.]
						{\includegraphics[width=.48\textwidth]{images/LaVisibilita-ContromisureSE2}}
					\caption{La visibilità - Rappresentazioni grafiche dei link nel web}
					\label{fig:LaVisibilita-FormaWeb}
				\end{figure}
			
		\subsection{Pagerank 3.0}
			Negli ultimi anni si è voluto migliorare la formula del \emph{pagerank} in particolare il fattore di teleporting.
			
			La vecchia formula (qui riporta in una versione leggermente diversa):
			\[
				(1-\epsilon )\cdot 1^T N + \epsilon L
			\]
			possiamo scriverla usando la matrice $P$ e diventa:
			\[
				(1- \epsilon )\cdot 1^T N + PL
			\]
			$P$ è una matrice che permette il \emph{pagerank} personalizzato. Ogni nodo è pesato con preferenze così rendiamo il teletrasporto meno stupido. In questo modo però sorgono proprebli riguardanti la libertà e la censura. Se infatti l'utente delle preferenze è il SE di turno potrebbe volutamente alzare il \emph{pagerank} ad alcuni siti e abbassarlo ad altri. 
			
			È noto che Google personalizza la bontà di un sito, alcune sono addirittura fatte a mano! \emph{Searchking}, competitor di Google, è stato penalizzato in questo modo e il ricorso legale ha rivelato come il \emph{pagerank} sia soltanto un'opinione.
			Con questo nuovo livello di \emph{pagerank} quindi possiamo dichiarare defunta la democrazia contenuta in esso.
		
			\subsubsection{Pagerank personalizzato}
			
				Il \emph{pagerank} personalizzato però non è disponibile soltanto ai SE ma anche all'utente. Ogni profilo personale di ogni utente calcola un \emph{pagerank} personalizzato in base a tutti i dati raccolti su di lui (vedi tutte le piattaforme Google disponibili che ogni giorno utilizziamo tutti).  In questo modo i risultati di ricerca varieranno in base ai suoi interessi.
				Ma come calcolare questo \emph{pagerank} personalizzato? Se restringiamo a soli due valori "sì" e "no" abbiamo con $N$ utenti: $2^N$ personalizzazioni. Troppe\dots
				Il \emph{pagerank} è linearmente componibile nello spazio delle possibilità per cui potremmo calcolarlo per $N$ utenti $N$ \emph{pagerank} personalizzati. Ancora troppi calcoli\dots
				
				La soluzione quindi è selezionare un certo numero di \emph{keyword} e \emph{topic}. Creare dei profili che approssimano gli utenti e su questo numero limitato calcolare il \emph{pagerank} personalizzato diviso a categorie a sua volta divise secondo necessità. Combinando i \emph{pagerank} precalcolati traccio il profilo degli utenti. Si fa notare che ogni \emph{pagerank} personalizzato è compatibile con le contromisure, questo comporta disturbi e limitazioni alle ottimizzazioni SEO.
			
			\subsubsection{Bontà di una pagina: doppio ranking}
				Fino a poco tempo fa il \emph{pagerank} costituiva un punteggio positivo che coesisteva con le contromisure dei SE per penalizzarlo. 
				Le alterazioni e gli attacchi nel web però resero le contromisure non più sufficienti per questo si è deciso di affiancare al normale \emph{pagerank} positivo un \emph{pagerank} opposto: un punteggio negativo.
			
			\subsubsection{Janus Graph}
				Per ricorrere a questa nuova misura bisognava mantenere il modello sottostante sempre uniforme e semplice, si è quindi ricorso al \textbf{grafo di Giano}.
				Il \emph{Janus Graph} è un grafo in cui ogni nodo ha due valori associati:
				\begin{itemize}
					\item $W^+$ per la parte positiva;
					\item $W^-$ per la parte negativa.	
				\end{itemize}	
				$W^+$ e $W^-$ sono due dati totalmente scorrelati. Il \emph{pagerank} finale è ottenuto dalla combinazione della parte buona e dalla parte cattiva.
									
			\subsubsection{Parte positiva \& parte negativa}
			
				\paragraph{Email with web}
				
				\paragraph{Altre estensioni: SIS}